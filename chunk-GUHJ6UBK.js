import{a as H}from"./chunk-X4KS6FTY.js";import{b as z}from"./chunk-QK46CZQ6.js";import{a as D}from"./chunk-Y4OXXLJ5.js";import{j as B}from"./chunk-U5M4MCHP.js";import{m as A}from"./chunk-KN5TDDFY.js";import{Ab as p,Kb as C,Lb as f,Oa as O,Q as v,Ra as o,Rb as _,Sb as d,Tb as s,Vb as l,Wb as W,_ as x,_b as I,bc as w,f as M,ga as m,gb as P,ha as y,qb as k,rb as c,sb as g,tb as S,vb as T,wb as E,xb as u,yb as a,zb as r}from"./chunk-QAY2GC3V.js";var L=(n,i)=>["/app/products/details/",n,i];function F(n,i){n&1&&(m(),a(0,"svg",3),p(1,"circle",24)(2,"path",25),r())}function $(n,i){n&1&&(m(),a(0,"svg",4),p(1,"path",26),r())}function V(n,i){n&1&&(a(0,"div",7)(1,"span",27),s(2," \u{1F525} Hot "),r()())}function q(n,i){if(n&1&&(m(),a(0,"svg",28),p(1,"path",29),r()),n&2){let e=i.$implicit;_("text-yellow-400",e==="full")("text-yellow-300",e==="half")("text-gray-300",e==="empty")}}function G(n,i){n&1&&(a(0,"span",20),s(1," Popular "),r())}function Y(n,i){if(n&1&&(a(0,"span",31),s(1),r()),n&2){let e=f(2);o(),l(" Only ",e.product.quantity," left ")}}function R(n,i){if(n&1&&(a(0,"div",21)(1,"span",30),s(2),r(),c(3,Y,2,1,"span",31),r()),n&2){let e=f();o(2),W(" ",e.product.brand.name," \u2022 ",e.product.category.name," "),o(),g(e.product.quantity<10?3:-1)}}function N(n,i){if(n&1&&(a(0,"span",32),s(1),r()),n&2){let e=f(2);o(),l(" Only ",e.product.quantity," left ")}}function U(n,i){if(n&1&&c(0,N,2,1,"span",32),n&2){let e=f();g(e.product.quantity<10?0:-1)}}function Q(n,i){n&1&&(p(0,"div",33),a(1,"span",34),s(2,"Adding..."),r())}function J(n,i){n&1&&(m(),a(0,"svg",23),p(1,"path",35),r())}var j=class n{toastr=x(D);wishlistService=x(H);cartServices=x(z);product;viewMode="grid";isAddingToCart=!1;isAddingToWishlist=!1;isInWishlist=!1;destroy$=new M;ngOnInit(){this.checkWishlistStatus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addToCart(i){this.isAddingToCart||(this.isAddingToCart=!0,this.cartServices.addProduct(i).subscribe({next:e=>{this.toastr.success("Product added to cart","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0}),this.isAddingToCart=!1},error:e=>{this.toastr.error("Failed to add product to cart","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0}),this.isAddingToCart=!1}}))}toggleWishlist(i){this.isAddingToWishlist||(this.isAddingToWishlist=!0,this.isInWishlist?this.removeFromWishlist(i):this.addToWishlist(i))}addToWishlist(i){this.wishlistService.addToWishlist(i).pipe(v(this.destroy$)).subscribe({next:e=>{this.isInWishlist=!0,this.isAddingToWishlist=!1,this.toastr.success("Added to wishlist","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0}),this.triggerHeartAnimation(i)},error:e=>{console.error("Error adding to wishlist:",e),this.isAddingToWishlist=!1,this.toastr.error("Failed to add to wishlist","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0})}})}removeFromWishlist(i){this.wishlistService.removeFromWishlist(i).pipe(v(this.destroy$)).subscribe({next:e=>{this.isInWishlist=!1,this.isAddingToWishlist=!1,this.toastr.info("Removed from wishlist","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0})},error:e=>{console.error("Error removing from wishlist:",e),this.isAddingToWishlist=!1,this.toastr.error("Failed to remove from wishlist","",{positionClass:"toast-top-right",timeOut:3e3,progressBar:!0})}})}checkWishlistStatus(){this.wishlistService.isInWishlist(this.product.id).pipe(v(this.destroy$)).subscribe({next:i=>{this.isInWishlist=i},error:i=>{console.error("Error checking wishlist status:",i),this.isInWishlist=!1}})}triggerHeartAnimation(i){let e=document.querySelector(`[data-product-id="${i}"]`);e&&(e.classList.add("heart-beat"),setTimeout(()=>{e.classList.remove("heart-beat")},1300))}getStars(i){let e=[],t=Math.floor(i),b=i%1!==0;for(let h=0;h<5;h++)h<t?e.push("full"):h===t&&b?e.push("half"):e.push("empty");return e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-card"]],inputs:{product:"product",viewMode:"viewMode"},decls:43,vars:47,consts:[[1,"block",3,"routerLink"],["loading","lazy",3,"src","alt"],[1,"absolute","top-3","right-3","p-2.5","rounded-full","shadow-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","wishlist-btn",3,"click","disabled","title"],["fill","none","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","transition-transform","duration-200","hover:scale-110"],[1,"absolute","top-3","left-3"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-xs","font-medium","bg-green-600","text-white","shadow-lg","backdrop-blur-sm"],[1,"absolute","bottom-3","left-3"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-2"],[1,"flex","items-center","space-x-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","transition-colors","duration-200",3,"text-yellow-400","text-yellow-300","text-gray-300"],[1,"text-sm","font-medium","text-gray-700","dark-text-gray-300"],[1,"text-xs","text-gray-500","dark-text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-xs","text-gray-600","dark-text-gray-400","font-medium"],[1,"flex","flex-col"],[1,"flex","items-baseline","space-x-2"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","dark-text-white"],[1,"text-sm","text-green-600","dark-text-green-400","font-medium"],[1,"flex","items-center","space-x-2","mt-1"],[3,"click","disabled"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill-rule","evenodd","d","M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule","evenodd"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-bold","bg-red-500","text-white","shadow-lg"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","transition-colors","duration-200"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"text-sm","text-gray-500","dark-text-gray-400"],[1,"text-xs","text-orange-600","dark-text-orange-400","font-medium"],[1,"text-xs","text-orange-600","dark-text-orange-400","font-medium","mt-1"],[1,"w-4","h-4","animate-spin","rounded-full","border-2","border-white","border-t-transparent"],[1,"text-sm"],["d","M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"]],template:function(e,t){e&1&&(a(0,"div")(1,"div")(2,"a",0),p(3,"img",1),r(),a(4,"button",2),C("click",function(){return t.toggleWishlist(t.product.id)}),c(5,F,3,0,":svg:svg",3)(6,$,2,0,":svg:svg",4),r(),a(7,"div",5)(8,"span",6),s(9),r()(),c(10,V,3,0,"div",7),r(),a(11,"div")(12,"a",0)(13,"h3"),s(14),r(),a(15,"p"),s(16),r()(),a(17,"div",8)(18,"div",9)(19,"div",10),T(20,q,2,6,":svg:svg",11,S),r(),a(22,"div",10)(23,"span",12),s(24),r(),a(25,"span",13),s(26),r()()(),a(27,"div",10),m(),a(28,"svg",14),p(29,"path",15),r(),y(),a(30,"span",16),s(31),r()()(),a(32,"div")(33,"div",17)(34,"div",18)(35,"span",19),s(36),r(),c(37,G,2,0,"span",20),r(),c(38,R,4,3,"div",21)(39,U,1,1),r(),a(40,"button",22),C("click",function(){return t.addToCart(t.product.id)}),c(41,Q,3,0)(42,J,2,0,":svg:svg",23),r()()()()),e&2&&(d(t.viewMode==="list"?"group bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 dark-bg-gray-800 dark-border-gray-700 overflow-hidden flex flex-col sm:flex-row":"group bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 dark-bg-gray-800 dark-border-gray-700 hover:scale-[1.02] overflow-hidden"),o(),d(t.viewMode==="list"?"relative overflow-hidden flex-shrink-0 w-full sm:w-48 h-48 sm:h-auto":"relative overflow-hidden"),o(),u("routerLink",w(41,L,t.product.id,t.product.slug)),o(),d(t.viewMode==="list"?"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105":"w-full h-48 sm:h-52 md:h-56 lg:h-60 transition-transform duration-300 group-hover:scale-105"),u("src",t.product.imageCover,O)("alt",t.product.title),o(),_("in-wishlist",t.isInWishlist)("not-in-wishlist",!t.isInWishlist),u("title",I(t.isInWishlist?"Remove from wishlist":"Add to wishlist"))("disabled",t.isAddingToWishlist),k("data-product-id",t.product.id),o(),g(t.isAddingToWishlist?5:6),o(4),l(" ",t.product.category.name," "),o(),g(t.product.sold>100?10:-1),o(),d(t.viewMode==="list"?"p-4 sm:p-5 flex-1 flex flex-col justify-between":"p-4 sm:p-5"),o(),u("routerLink",w(44,L,t.product.id,t.product.slug)),o(),d(t.viewMode==="list"?"text-lg sm:text-xl font-semibold text-gray-900 dark-text-white group-hover/link:text-green-600 transition-colors duration-200 mb-2":"text-lg sm:text-xl font-semibold text-gray-900 dark-text-white line-clamp-1 group-hover/link:text-green-600 transition-colors duration-200 mb-2"),o(),l(" ",t.product.title," "),o(),d(t.viewMode==="list"?"text-sm text-gray-500 dark-text-gray-400 mb-3":"text-sm text-gray-500 dark-text-gray-400 line-clamp-1 mb-3"),o(),l(" ",t.product.description," "),o(4),E(t.getStars(t.product.ratingsAverage)),o(4),l(" ",t.product.ratingsAverage," "),o(2),l(" (",t.product.ratingsQuantity,") "),o(5),l(" ",t.product.brand.name," "),o(),d(t.viewMode==="list"?"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mt-auto":"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),o(4),l(" $",t.product.price," "),o(),g(t.product.sold>50?37:-1),o(),g(t.viewMode==="list"?38:39),o(2),d(t.viewMode==="list"?"flex items-center justify-center gap-2 px-4 py-2.5 sm:px-6 bg-green-600 hover:bg-green-700 disabled:bg-gray-500 text-white font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:cursor-not-allowed w-full sm:w-auto":"flex items-center justify-center gap-2 px-4 py-2.5 sm:px-6 bg-green-600 hover:bg-green-700 disabled:bg-gray-500 text-white font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:cursor-not-allowed"),u("disabled",t.isAddingToCart),o(),g(t.isAddingToCart?41:42))},dependencies:[B,A],styles:[".group[_ngcontent-%COMP%]:hover   .group-hover\\:scale-105[_ngcontent-%COMP%]{transform:scale(1.05)}.group[_ngcontent-%COMP%]:hover   .group-hover\\:opacity-100[_ngcontent-%COMP%]{opacity:1}.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}.wishlist-btn[_ngcontent-%COMP%]{transition:all .3s ease}.wishlist-btn.in-wishlist[_ngcontent-%COMP%]{color:#ef4444!important;background-color:#fef2f2!important}.wishlist-btn.in-wishlist[_ngcontent-%COMP%]:hover{background-color:#fee2e2!important;transform:scale(1.1)}.wishlist-btn.not-in-wishlist[_ngcontent-%COMP%]{color:#6b7280!important;background-color:#ffffffe6!important}.wishlist-btn.not-in-wishlist[_ngcontent-%COMP%]:hover{color:#ef4444!important;background-color:#fef2f2!important;transform:scale(1.05)}.dark[_ngcontent-%COMP%]   .wishlist-btn.in-wishlist[_ngcontent-%COMP%]{color:#fca5a5!important;background-color:#7f1d1d!important}.dark[_ngcontent-%COMP%]   .wishlist-btn.in-wishlist[_ngcontent-%COMP%]:hover{background-color:#991b1b!important}.dark[_ngcontent-%COMP%]   .wishlist-btn.not-in-wishlist[_ngcontent-%COMP%]{color:#9ca3af!important;background-color:#1f2937e6!important}.dark[_ngcontent-%COMP%]   .wishlist-btn.not-in-wishlist[_ngcontent-%COMP%]:hover{color:#fca5a5!important;background-color:#7f1d1d!important}img[_ngcontent-%COMP%]{background-color:#f3f4f6;background-image:linear-gradient(90deg,#f3f4f6 25%,#e5e7eb,#f3f4f6 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 640px){.group[_ngcontent-%COMP%]{margin-bottom:1rem}}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.3)}70%{transform:scale(1)}}.heart-beat[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat 1.3s ease-in-out}.group[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.group[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease,filter .3s ease}.group[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(1.05)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.add-to-cart-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .6s ease-in-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.badge-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}.image-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #10b981;outline-offset:2px;box-shadow:0 0 0 4px #10b9811a}.wishlist-btn[_ngcontent-%COMP%]{transition:all .2s ease}.wishlist-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.wishlist-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_priceHighlight{0%{background-color:transparent}50%{background-color:#10b9811a}to{background-color:transparent}}.price-highlight[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_priceHighlight .6s ease-in-out}.star-rating[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .2s ease}.star-rating[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.card-overlay[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0000,#0000001a)}@media (prefers-color-scheme: dark){.group[_ngcontent-%COMP%]:hover{box-shadow:0 20px 25px -5px #0000004d,0 10px 10px -5px #0000001a}.image-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#374151 25%,#4b5563,#374151 75%);background-size:200% 100%}}@media (max-width: 640px){.group[_ngcontent-%COMP%]{margin-bottom:1rem}.group[_ngcontent-%COMP%]:hover{transform:none}.wishlist-btn[_ngcontent-%COMP%]{opacity:1!important}}@media (prefers-reduced-motion: reduce){.group[_ngcontent-%COMP%], .group[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .wishlist-btn[_ngcontent-%COMP%], .star-rating[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:none}.heart-beat[_ngcontent-%COMP%], .add-to-cart-pulse[_ngcontent-%COMP%], .badge-slide-in[_ngcontent-%COMP%], .price-highlight[_ngcontent-%COMP%]{animation:none}}"]})};export{j as a};

import{a as o}from"./chunk-6GCZYUDH.js";import{g as d,i as r}from"./chunk-QA474ISG.js";import{R as s,V as n,_ as p,g as c,sa as C}from"./chunk-QAY2GC3V.js";var a=class e{cartCountSubject=new c(0);cartCount$=this.cartCountSubject.asObservable();wishlistCountSubject=new c(0);wishlistCount$=this.wishlistCountSubject.asObservable();updateCartCount(t){this.cartCountSubject.next(t)}getCartCount(){return this.cartCountSubject.value}updateWishlistCount(t){this.wishlistCountSubject.next(t)}getWishlistCount(){return this.wishlistCountSubject.value}resetCartCount(){this.cartCountSubject.next(0)}resetWishlistCount(){this.wishlistCountSubject.next(0)}resetAll(){this.resetCartCount(),this.resetWishlistCount()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var h=class e extends d{stateService=p(a);addProduct(t){return this.post(r.addToCart,{productId:t},{token:o.TOKEN}).pipe(s(()=>{this.refreshCartCount()}))}getCart(){return this.get(r.getCart,{},{token:o.TOKEN})}refreshCartCount(){this.getCart().subscribe({next:t=>{let i=t.data.products?.reduce((u,l)=>u+l.count,0)||0;this.stateService.updateCartCount(i)},error:()=>{this.stateService.updateCartCount(0)}})}updateQuantity(t,i){return this.put(r.updateQuantity+t,{count:i},{token:o.TOKEN}).pipe(s(()=>{this.refreshCartCount()}))}deleteProduct(t){return this.delete(r.deleteProduct+t,{},{token:o.TOKEN}).pipe(s(()=>{this.refreshCartCount()}))}clearCart(){return this.delete(r.clearCart,{},{token:o.TOKEN}).pipe(s(()=>{this.refreshCartCount()}))}getOrders(t){return this.get(r.allorders+t)}static \u0275fac=(()=>{let t;return function(u){return(t||(t=C(e)))(u||e)}})();static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};export{a,h as b};

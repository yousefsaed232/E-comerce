import{a as W}from"./chunk-QK46CZQ6.js";import{a as s}from"./chunk-6GCZYUDH.js";import{g as m,i}from"./chunk-QA474ISG.js";import{R as a,V as n,_ as l,o,sa as p}from"./chunk-QAY2GC3V.js";var c=class e extends m{stateService=l(W);getWishlist(){return this.get(i.getWishlist,{},{token:s.TOKEN})}addToWishlist(t){return this.post(i.addToWishlist,{productId:t},{token:s.TOKEN}).pipe(a(()=>{this.refreshWishlistCount()}))}removeFromWishlist(t){return this.delete(i.removeFromWishlist+t,{},{token:s.TOKEN}).pipe(a(()=>{this.refreshWishlistCount()}))}isInWishlist(t){return this.getWishlist().pipe(o(h=>h.data.some(r=>r._id===t)))}getWishlistCount(){return this.getWishlist().pipe(o(t=>t.count))}refreshWishlistCount(){this.getWishlistCount().subscribe({next:t=>{this.stateService.updateWishlistCount(t)},error:()=>{this.stateService.updateWishlistCount(0)}})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=p(e)))(r||e)}})();static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};export{c as a};

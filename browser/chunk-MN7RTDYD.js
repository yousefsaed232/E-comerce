import{b as E,c as d,d as F,e as z,j as I,l as V,m as T,t as D,v as G}from"./chunk-QZFKTEUQ.js";import{a as C}from"./chunk-6GCZYUDH.js";import{a as B}from"./chunk-Y4OXXLJ5.js";import"./chunk-DUKSTT3K.js";import{g as w,i as S}from"./chunk-U5M4MCHP.js";import{h as M,m as k}from"./chunk-KN5TDDFY.js";import{g as H,h as A,i as b}from"./chunk-QA474ISG.js";import{Ab as a,Kb as x,Lb as h,Ra as s,Tb as p,V as P,Vb as u,_ as g,ga as l,gb as O,ha as m,lb as f,sa as _,xb as c,yb as n,zb as t}from"./chunk-QAY2GC3V.js";import{a as y}from"./chunk-7CGTOI24.js";var v=class o extends H{onlinePayment(i,e){return this.post(b.onlinePayment+e+`?url=${A.appUrl}`,i,{token:C.TOKEN})}codPayment(i,e){return this.post(b.codPayment+e,i,{token:C.TOKEN})}static \u0275fac=(()=>{let i;return function(r){return(i||(i=_(o)))(r||o)}})();static \u0275prov=P({token:o,factory:o.\u0275fac,providedIn:"root"})};function U(o,i){if(o&1&&(n(0,"div",30),l(),n(1,"svg",31),a(2,"path",32),t(),p(3),t()),o&2){let e=h();s(3),u(" ",e.getFieldErrorMessage("details")," ")}}function q(o,i){if(o&1&&(n(0,"div",30),l(),n(1,"svg",31),a(2,"path",32),t(),p(3),t()),o&2){let e=h();s(3),u(" ",e.getFieldErrorMessage("city")," ")}}function $(o,i){if(o&1&&(n(0,"div",30),l(),n(1,"svg",31),a(2,"path",32),t(),p(3),t()),o&2){let e=h();s(3),u(" ",e.getFieldErrorMessage("phone")," ")}}function j(o,i){o&1&&a(0,"span",33)}function R(o,i){o&1&&(l(),n(0,"svg",34),a(1,"path",35),t())}function K(o,i){o&1&&a(0,"span",33)}function J(o,i){o&1&&(l(),n(0,"svg",34),a(1,"path",35),t())}var L=class o{router=g(S);toastr=g(B);paymentService=g(v);cartId=g(w).snapshot.params.id;fb=g(D);isProcessingCOD=!1;isProcessingOnline=!1;paymentForm=this.fb.group({details:["",[d.required,d.minLength(10)]],phone:["",[d.required,d.pattern(/^[0-9+\-\s()]{10,15}$/)]],city:["",[d.required,d.minLength(2)]]});payment(i){this.paymentForm.markAllAsTouched(),!this.paymentForm.invalid&&(i==="cod"?(this.isProcessingCOD=!0,this.paymentService.codPayment({shippingAddress:y({},this.paymentForm.value)},this.cartId).subscribe({next:e=>{this.isProcessingCOD=!1,this.toastr.success("Cash On Delivery Payment Successful"),this.router.navigate(["/app/home"])},error:e=>{console.error("Cash On Delivery  Payment Error:",e),this.isProcessingCOD=!1,this.toastr.error("Cash On Delivery Payment Failed")}})):i==="online"&&(this.isProcessingOnline=!0,this.paymentService.onlinePayment({shippingAddress:y({},this.paymentForm.value)},this.cartId).subscribe({next:e=>{this.isProcessingOnline=!1,this.toastr.success("Online Payment Successful"),this.router.navigate(["/app/home"]),e.session?.url&&window.open(e.session.url,"_self")},error:e=>{console.error("Online Payment Error:",e),this.isProcessingOnline=!1,this.toastr.error("Online Payment Failed"),this.router.navigate(["/app/cart"])}})))}hasFieldError(i){let e=this.paymentForm.get(i);return!!(e&&e.invalid&&e.touched)}getFieldErrorMessage(i){let e=this.paymentForm.get(i);return!e||!e.errors||!e.touched?"":e.errors.required?`${i.charAt(0).toUpperCase()+i.slice(1)} is required`:e.errors.minlength?`${i.charAt(0).toUpperCase()+i.slice(1)} must be at least ${e.errors.minlength.requiredLength} characters`:e.errors.pattern?`Please enter a valid ${i}`:""}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["app-checkout-page"]],decls:54,vars:12,consts:[[1,"checkout-container"],[1,"checkout-card"],[1,"checkout-header"],[1,"checkout-title"],[1,"checkout-subtitle"],[1,"checkout-form",3,"formGroup"],[1,"form-group"],["for","details",1,"form-label"],["fill","currentColor","viewBox","0 0 20 20",1,"inline","w-4","h-4","mr-2"],["fill-rule","evenodd","d","M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule","evenodd"],[1,"relative"],["fill","currentColor","viewBox","0 0 20 20",1,"form-icon","w-5","h-5"],["type","text","formControlName","details","id","details","name","details","placeholder","Enter your complete address",1,"form-input","form-input-with-icon"],["class","form-error",4,"ngIf"],["for","city",1,"form-label"],["fill-rule","evenodd","d","M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-6a1 1 0 00-1-1H9a1 1 0 00-1 1v6a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z","clip-rule","evenodd"],["type","text","formControlName","city","id","city","name","city","placeholder","Enter your city",1,"form-input","form-input-with-icon"],["for","phone",1,"form-label"],["d","M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"],["type","tel","formControlName","phone","id","phone","name","phone","placeholder","Enter your phone number",1,"form-input","form-input-with-icon"],[1,"payment-section"],[1,"payment-title"],[1,"payment-buttons"],["type","button",1,"payment-btn","payment-btn-cod",3,"click","disabled"],["class","loading-spinner",4,"ngIf"],["class","inline w-5 h-5 mr-2","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["type","button",1,"payment-btn","payment-btn-online",3,"click","disabled"],[1,"text-center","text-sm","text-gray-500","mt-4"],["fill","currentColor","viewBox","0 0 20 20",1,"inline","w-4","h-4","mr-1"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],[1,"form-error"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"loading-spinner"],["fill","currentColor","viewBox","0 0 20 20",1,"inline","w-5","h-5","mr-2"],["fill-rule","evenodd","d","M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z","clip-rule","evenodd"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),p(4,"Secure Checkout"),t(),n(5,"p",4),p(6,"Complete your order with confidence"),t()(),n(7,"form",5)(8,"div",6)(9,"label",7),l(),n(10,"svg",8),a(11,"path",9),t(),p(12," Shipping Address "),t(),m(),n(13,"div",10),l(),n(14,"svg",11),a(15,"path",9),t(),m(),a(16,"input",12),t(),f(17,U,4,1,"div",13),t(),n(18,"div",6)(19,"label",14),l(),n(20,"svg",8),a(21,"path",9),t(),p(22," City "),t(),m(),n(23,"div",10),l(),n(24,"svg",11),a(25,"path",15),t(),m(),a(26,"input",16),t(),f(27,q,4,1,"div",13),t(),n(28,"div",6)(29,"label",17),l(),n(30,"svg",8),a(31,"path",18),t(),p(32," Phone Number "),t(),m(),n(33,"div",10),l(),n(34,"svg",11),a(35,"path",18),t(),m(),a(36,"input",19),t(),f(37,$,4,1,"div",13),t(),n(38,"div",20)(39,"h2",21),p(40,"Choose Payment Method"),t(),n(41,"div",22)(42,"button",23),x("click",function(){return r.payment("cod")}),f(43,j,1,0,"span",24)(44,R,2,0,"svg",25),p(45),t(),n(46,"button",26),x("click",function(){return r.payment("online")}),f(47,K,1,0,"span",24)(48,J,2,0,"svg",25),p(49),t()(),n(50,"p",27),l(),n(51,"svg",28),a(52,"path",29),t(),p(53," Your payment information is secure and encrypted "),t()()()()()),e&2&&(s(7),c("formGroup",r.paymentForm),s(10),c("ngIf",r.hasFieldError("details")),s(10),c("ngIf",r.hasFieldError("city")),s(10),c("ngIf",r.hasFieldError("phone")),s(5),c("disabled",r.paymentForm.invalid||r.isProcessingCOD||r.isProcessingOnline),s(),c("ngIf",r.isProcessingCOD),s(),c("ngIf",!r.isProcessingCOD),s(),u(" ",r.isProcessingCOD?"Processing...":"Cash on Delivery"," "),s(),c("disabled",r.paymentForm.invalid||r.isProcessingCOD||r.isProcessingOnline),s(),c("ngIf",r.isProcessingOnline),s(),c("ngIf",!r.isProcessingOnline),s(),u(" ",r.isProcessingOnline?"Processing...":"Online Payment"," "))},dependencies:[G,I,E,F,z,V,T,k,M],styles:[`.checkout-container[_ngcontent-%COMP%]{padding:2rem 0}.checkout-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 40px #0000001a;overflow:hidden;margin:0 auto;max-width:600px}.checkout-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#08882a,#126e02);color:#fff;padding:2rem;text-align:center;position:relative}.checkout-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>')}.checkout-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;position:relative;z-index:1}.checkout-subtitle[_ngcontent-%COMP%]{font-size:12px;opacity:.9;margin-top:.5rem;position:relative;z-index:1}.checkout-form[_ngcontent-%COMP%]{padding:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px;position:relative}.form-label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#374151;margin-bottom:.75rem;font-size:12px;letter-spacing:.025em}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:12px;font-size:12px;transition:all .3s ease;background:#f9fafb;position:relative}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#08882a;background:#fff;box-shadow:0 0 0 3px #08882a1a;transform:translateY(-1px)}.form-input[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#fff}.form-icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:#9ca3af;z-index:10}.form-input-with-icon[_ngcontent-%COMP%]{padding-left:30px}.payment-section[_ngcontent-%COMP%]{margin-top:30px;padding-top:2rem;border-top:2px solid #f3f4f6}.payment-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#374151;margin-bottom:15px;text-align:center}.payment-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.payment-btn[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:10px 20px;border:none;border-radius:12px;font-size:12px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;text-transform:uppercase;letter-spacing:.5px}.payment-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.payment-btn[_ngcontent-%COMP%]:hover:before{left:100%}.payment-btn-cod[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 15px #10b9814d}.payment-btn-cod[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #10b98166}.payment-btn-online[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;box-shadow:0 4px 15px #3b82f64d}.payment-btn-online[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3b82f666}.payment-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.payment-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.payment-btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:0 4px 15px #3b82f64d}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-right:.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.form-error[_ngcontent-%COMP%]{color:#ef4444;font-size:12px;margin-top:.5rem;display:flex;align-items:center;gap:.25rem}.form-success[_ngcontent-%COMP%]{color:#10b981;font-size:12px;margin-top:.5rem;display:flex;align-items:center;gap:.25rem}@media (max-width: 768px){.checkout-container[_ngcontent-%COMP%]{padding:1rem}.checkout-form[_ngcontent-%COMP%]{padding:20px 15px}.checkout-title[_ngcontent-%COMP%]{font-size:20px}.payment-buttons[_ngcontent-%COMP%]{flex-direction:column}.payment-btn[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 480px){.checkout-form[_ngcontent-%COMP%]{padding:15px 10px}.checkout-title[_ngcontent-%COMP%]{font-size:17px}.form-input[_ngcontent-%COMP%]{padding:8px 10px}.form-input-with-icon[_ngcontent-%COMP%]{padding-left:25px}.payment-btn[_ngcontent-%COMP%]{padding:8px 15px}}.form-group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease forwards;opacity:0;transform:translateY(20px)}.form-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-group[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_slideInUp{to{opacity:1;transform:translateY(0)}}.payment-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease forwards;animation-delay:.5s;opacity:0;transform:translateY(20px)}`]})};export{L as CheckoutPage};

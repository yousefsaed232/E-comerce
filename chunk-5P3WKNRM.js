import{b as L,d as Q,i as $,k as j,q as z,u as H}from"./chunk-QZFKTEUQ.js";import{a as G}from"./chunk-TQUIZIP3.js";import{b as D}from"./chunk-QK46CZQ6.js";import"./chunk-6GCZYUDH.js";import{a as B}from"./chunk-Y4OXXLJ5.js";import"./chunk-DUKSTT3K.js";import{i as F}from"./chunk-U5M4MCHP.js";import{m as V}from"./chunk-KN5TDDFY.js";import"./chunk-QA474ISG.js";import{Ab as m,Gb as f,Kb as x,Lb as s,Oa as w,Ra as a,Tb as o,Ub as k,Vb as p,Wb as I,Xb as E,Yb as O,Zb as T,_ as v,ea as u,fa as g,ga as C,gb as P,ha as y,rb as _,sb as b,vb as M,wb as S,xb as h,yb as e,zb as i}from"./chunk-QAY2GC3V.js";import"./chunk-7CGTOI24.js";var U=(n,r)=>r._id;function Y(n,r){n&1&&(e(0,"div",0),m(1,"app-loading-spinner",3),i()),n&2&&(a(),h("overlay",!0)("showMessage",!0))}function q(n,r){if(n&1){let t=f();e(0,"div",1)(1,"div",4),o(2),i(),e(3,"button",5),x("click",function(){u(t);let l=s();return g(l.getCart())}),o(4," Try Again "),i()()}if(n&2){let t=s();a(2),k(t.error)}}function W(n,r){if(n&1){let t=f();e(0,"div",1)(1,"div",6),C(),e(2,"svg",7),m(3,"path",8),i(),y(),e(4,"h2",9),o(5,"Your cart is empty"),i(),e(6,"p",10),o(7,"Looks like you haven't added any items to your cart yet."),i()(),e(8,"button",11),x("click",function(){u(t);let l=s();return g(l.continueShopping())}),o(9," Start Shopping "),i()()}}function R(n,r){if(n&1&&(e(0,"div",18)(1,"div",37),C(),e(2,"svg",38),m(3,"path",39),i(),y(),e(4,"div",40)(5,"p",41),o(6),i()()()()),n&2){let t=s(2);a(6),k(t.successMessage)}}function J(n,r){if(n&1&&(e(0,"div",19)(1,"div",37),C(),e(2,"svg",42),m(3,"path",43),i(),y(),e(4,"div",40)(5,"p",44),o(6),i()()()()),n&2){let t=s(2);a(6),k(t.error)}}function K(n,r){n&1&&m(0,"div",55)}function X(n,r){n&1&&(C(),e(0,"svg",56),m(1,"path",62),i())}function Z(n,r){n&1&&m(0,"div",55)}function tt(n,r){n&1&&(C(),e(0,"svg",56),m(1,"path",63),i())}function et(n,r){n&1&&m(0,"div",61)}function it(n,r){n&1&&(C(),e(0,"svg",56),m(1,"path",64),i())}function nt(n,r){if(n&1){let t=f();e(0,"div",23)(1,"div",45)(2,"div",46),m(3,"img",47),i(),e(4,"div",48)(5,"h3",49),o(6),i(),e(7,"div",50)(8,"p"),o(9),i(),e(10,"p"),o(11),i()(),e(12,"div",51),o(13),i()(),e(14,"div",52)(15,"div",53)(16,"button",54),x("click",function(){let l=u(t).$implicit,c=s(2);return g(c.updateQuantity(l.product.id,l.count-1))}),_(17,K,1,0,"div",55)(18,X,2,0,":svg:svg",56),i(),e(19,"input",57),T("ngModelChange",function(l){let c=u(t).$implicit;return O(c.count,l)||(c.count=l),g(l)}),x("ngModelChange",function(l){let c=u(t).$implicit,N=s(2);return g(N.updateQuantity(c.product.id,l))}),i(),e(20,"button",54),x("click",function(){let l=u(t).$implicit,c=s(2);return g(c.updateQuantity(l.product.id,l.count+1))}),_(21,Z,1,0,"div",55)(22,tt,2,0,":svg:svg",56),i()(),e(23,"div",58)(24,"div",59),o(25),i()(),e(26,"button",60),x("click",function(){let l=u(t).$implicit,c=s(2);return g(c.removeItem(l.product.id))}),_(27,et,1,0,"div",61)(28,it,2,0,":svg:svg",56),i()()()()}if(n&2){let t=r.$implicit,d=s(2);a(3),h("src",t.product.imageCover,w)("alt",t.product.title),a(3),p(" ",t.product.title," "),a(3),p("Brand: ",t.product.brand.name),a(2),p("Category: ",t.product.category.name),a(2),p(" $",t.price.toFixed(2)," each "),a(3),h("disabled",d.updatingQuantityId===t.product.id||t.count<=1),a(),b(d.updatingQuantityId===t.product.id?17:18),a(2),E("ngModel",t.count),a(),h("disabled",d.updatingQuantityId===t.product.id),a(),b(d.updatingQuantityId===t.product.id?21:22),a(4),p(" $",(t.price*t.count).toFixed(2)," "),a(),h("disabled",d.removingItemId===t.product.id),a(),b(d.removingItemId===t.product.id?27:28)}}function rt(n,r){n&1&&(e(0,"span",29),o(1,"FREE"),i())}function ot(n,r){if(n&1&&o(0),n&2){let t=s(2);p(" $",t.shipping.toFixed(2)," ")}}function at(n,r){n&1&&(e(0,"div",36)(1,"p",65)(2,"span",66),o(3,"Free shipping"),i(),o(4," on orders over $100 "),i()())}function lt(n,r){if(n&1){let t=f();e(0,"section",2)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div")(5,"h1",15),o(6,"Shopping Cart"),i(),e(7,"p",16),o(8),i()(),e(9,"button",17),x("click",function(){u(t);let l=s();return g(l.clearCart())}),o(10," Clear Cart "),i()()(),_(11,R,7,1,"div",18),_(12,J,7,1,"div",19),e(13,"div",20)(14,"div",21)(15,"div",22),M(16,nt,29,14,"div",23,U),i()(),e(18,"div",24)(19,"div",25)(20,"h2",26),o(21,"Order Summary"),i(),e(22,"div",22)(23,"div",27)(24,"span",10),o(25),i(),e(26,"span",28),o(27),i()(),e(28,"div",27)(29,"span",10),o(30,"Shipping"),i(),e(31,"span",28),_(32,rt,2,0,"span",29)(33,ot,1,1),i()(),e(34,"div",27)(35,"span",10),o(36,"Tax"),i(),e(37,"span",28),o(38),i()(),e(39,"div",30)(40,"div",31)(41,"span",32),o(42,"Total"),i(),e(43,"span",32),o(44),i()()()(),e(45,"div",33)(46,"button",34),x("click",function(){u(t);let l=s();return g(l.proceedToCheckout())}),o(47," Proceed to Checkout "),i(),e(48,"button",35),x("click",function(){u(t);let l=s();return g(l.continueShopping())}),o(49," Continue Shopping "),i()(),_(50,at,5,0,"div",36),i()()()()()}if(n&2){let t=s();a(8),I(" ",t.totalItems," ",t.totalItems===1?"item":"items"," in your cart "),a(3),b(t.successMessage?11:-1),a(),b(t.error?12:-1),a(4),S(t.cart.products),a(9),p("Subtotal (",t.totalItems," items)"),a(2),p("$",t.subtotal.toFixed(2)),a(5),b(t.shipping===0?32:33),a(6),p("$",t.tax.toFixed(2)),a(6),p("$",t.total.toFixed(2)),a(6),b(t.shipping>0?50:-1)}}var A=class n{cartServices=v(D);router=v(F);toastr=v(B);cart;isLoading=!0;error=null;successMessage=null;removingItemId=null;updatingQuantityId=null;ngOnInit(){this.getCart()}getCart(){this.isLoading=!0,this.error=null,this.successMessage=null,this.cartServices.getCart().subscribe({next:r=>{this.cart=r.data,this.isLoading=!1},error:r=>{console.error("Error fetching cart:",r),this.error="Failed to load cart items",this.isLoading=!1,this.toastr.error("Failed to load cart items")}})}updateQuantity(r,t){if(t<1){this.removeItem(r);return}this.updatingQuantityId=r,this.error=null,this.successMessage=null,this.cartServices.updateQuantity(r,t).subscribe({next:d=>{let l=this.cart.products.find(c=>c.product.id===r);l&&(l.count=t),this.cart.totalCartPrice=d.data.totalCartPrice,this.updatingQuantityId=null,this.toastr.success("Quantity updated successfully")},error:d=>{console.error("Error updating quantity:",d),this.error="Failed to update quantity",this.updatingQuantityId=null,this.toastr.error("Failed to update quantity")}})}removeItem(r){this.removingItemId=r,this.error=null,this.successMessage=null,this.cartServices.deleteProduct(r).subscribe({next:()=>{this.cart.products=this.cart.products.filter(t=>t.product.id!==r),this.calculateTotalPrice(),this.cart.products.length===0&&(this.cart={}),this.removingItemId=null,this.successMessage="Item removed from cart",this.toastr.success("Item removed from cart"),setTimeout(()=>{this.successMessage=null},3e3)},error:t=>{console.error("Error removing item:",t),this.error="Failed to remove item",this.removingItemId=null,this.toastr.error("Failed to remove item")}})}clearCart(){confirm("Are you sure you want to clear your cart?")&&this.cartServices.clearCart().subscribe({next:()=>{this.cart={},this.successMessage="Cart cleared successfully",this.toastr.success("Cart cleared successfully"),setTimeout(()=>{this.successMessage=null},3e3)},error:r=>{console.error("Error clearing cart:",r),this.error="Failed to clear cart",this.toastr.error("Failed to clear cart")}})}proceedToCheckout(){this.router.navigate(["/app/checkout/",this.cart._id])}continueShopping(){this.router.navigate(["/app/products"])}calculateTotalPrice(){this.cart.totalCartPrice=this.cart.products.reduce((r,t)=>r+t.price*t.count,0)}get hasItems(){return this.cart&&this.cart.products&&this.cart.products.length>0}get totalItems(){return this.cart?.products?.reduce((r,t)=>r+t.count,0)||0}get subtotal(){return this.cart?.totalCartPrice||0}get tax(){return this.subtotal*.1}get shipping(){return this.subtotal>100?0:10}get total(){return this.subtotal+this.tax+this.shipping}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-cart-page"]],decls:4,vars:1,consts:[[1,"flex","justify-center","items-center","h-screen"],[1,"flex","flex-col","justify-center","items-center","h-screen","px-4"],[1,"bg-gray-50","dark-bg-gray-900","min-h-screen","py-8"],["type","bounce","size","lg","color","success","message","your cart is loading...",3,"overlay","showMessage"],[1,"text-red-500","text-lg","mb-4","text-center"],[1,"px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","duration-200",3,"click"],[1,"text-center","mb-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-24","w-24","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"],[1,"text-2xl","font-bold","text-gray-900","dark-text-white","mb-2"],[1,"text-gray-500","dark-text-gray-400"],[1,"px-8","py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","duration-200","font-medium",3,"click"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-3xl","font-bold","text-gray-900","dark-text-white"],[1,"mt-2","text-sm","text-gray-500","dark-text-gray-400"],[1,"mt-4","sm:mt-0","px-4","py-2","text-sm","font-medium","text-red-600","hover:text-red-700","hover:bg-red-50","rounded-lg","transition-colors","duration-200",3,"click"],[1,"mb-6","rounded-lg","bg-green-50","border","border-green-200","p-4","dark-bg-green-900/20","dark-border-green-800"],[1,"mb-6","rounded-lg","bg-red-50","border","border-red-200","p-4","dark-bg-red-900/20","dark-border-red-800"],[1,"lg:grid","lg:grid-cols-12","lg:gap-x-12","xl:gap-x-16"],[1,"lg:col-span-8"],[1,"space-y-4"],[1,"bg-white","dark-bg-gray-800","rounded-xl","shadow-sm","border","border-gray-200","dark-border-gray-700","p-4","sm:p-6"],[1,"mt-8","lg:mt-0","lg:col-span-4"],[1,"bg-white","dark-bg-gray-800","rounded-xl","shadow-sm","border","border-gray-200","dark-border-gray-700","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark-text-white","mb-6"],[1,"flex","justify-between","text-sm"],[1,"font-medium","text-gray-900","dark-text-white"],[1,"text-green-600","font-semibold"],[1,"border-t","border-gray-200","dark-border-gray-700","pt-4"],[1,"flex","justify-between","text-base","font-semibold"],[1,"text-gray-900","dark-text-white"],[1,"mt-6","space-y-3"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-medium","py-3","px-4","rounded-lg","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2",3,"click"],[1,"w-full","bg-gray-100","hover:bg-gray-200","dark-bg-gray-700","dark-hover:bg-gray-600","text-gray-700","dark-text-gray-200","font-medium","py-3","px-4","rounded-lg","transition-colors","duration-200",3,"click"],[1,"mt-4","p-3","bg-blue-50","dark-bg-blue-900/20","rounded-lg"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-green-800","dark-text-green-200"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800","dark-text-red-200"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-4"],[1,"flex-shrink-0"],[1,"h-20","w-20","sm:h-24","sm:w-24","object-cover","rounded-lg",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-lg","font-semibold","text-gray-900","dark-text-white","line-clamp-2"],[1,"mt-1","text-sm","text-gray-500","dark-text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900","dark-text-white"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","border","border-gray-300","dark-border-gray-600","rounded-lg"],["type","button",1,"p-2","text-gray-500","hover:text-gray-700","dark-text-gray-400","dark-hover:text-gray-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-4","h-4","animate-spin","rounded-full","border-2","border-gray-300","border-t-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["type","number","min","1",1,"w-16","text-center","border-0","bg-transparent","text-sm","font-medium","text-gray-900","dark-text-white","focus:outline-none","focus:ring-0",3,"ngModelChange","ngModel"],[1,"text-right"],[1,"text-lg","font-bold","text-gray-900","dark-text-white"],["type","button",1,"p-2","text-red-500","hover:text-red-700","hover:bg-red-50","dark-hover:bg-red-900/20","rounded-lg","transition-colors","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-4","h-4","animate-spin","rounded-full","border-2","border-red-300","border-t-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-blue-800","dark-text-blue-200"],[1,"font-medium"]],template:function(t,d){t&1&&_(0,Y,2,2,"div",0)(1,q,5,1,"div",1)(2,W,10,0,"div",1)(3,lt,51,10,"section",2),t&2&&b(d.isLoading?0:d.error&&!d.hasItems?1:d.hasItems?3:2)},dependencies:[G,V,H,L,j,Q,z,$],styles:[".line-clamp-1[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}input[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.dark[_ngcontent-%COMP%]   .space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#374151}.dark[_ngcontent-%COMP%]   .space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6b7280}.dark[_ngcontent-%COMP%]   .space-y-4[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.bg-white[_ngcontent-%COMP%]:hover, .dark[_ngcontent-%COMP%]   .bg-gray-800[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rounded-lg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@media (max-width: 640px){.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1rem}.flex-col.sm\\:flex-row[_ngcontent-%COMP%]{flex-direction:column}.sm\\:items-center[_ngcontent-%COMP%]{align-items:flex-start}}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.focus\\:ring-2[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #3b82f680}.focus\\:ring-green-500[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #22c55e80}img[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out}img[loading=lazy][_ngcontent-%COMP%]{opacity:0}img[loading=lazy].loaded[_ngcontent-%COMP%]{opacity:1}"]})};export{A as CartPage};
